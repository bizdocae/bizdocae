module.exports = async (req, res) => {
  // CORS
  res.setHeader("Access-Control-Allow-Origin", "*");
  res.setHeader("Access-Control-Allow-Methods", "GET,POST,OPTIONS");
  res.setHeader("Access-Control-Allow-Headers", "Content-Type, Authorization");
  if (req.method === "OPTIONS") return res.status(204).end();

  // A tiny valid PDF (one blank page)
  const pdf = Buffer.from([
    0x25,0x50,0x44,0x46,0x2D,0x31,0x2E,0x34,0x0A,                    // %PDF-1.4\n
    0x25,0xE2,0xE3,0xCF,0xD3,0x0A,                                    // binary comment
    // 1 0 obj (catalog)
    0x31,0x20,0x30,0x20,0x6F,0x62,0x6A,0x0A,0x3C,0x3C,0x2F,0x54,0x79,0x70,0x65,0x2F,
    0x43,0x61,0x74,0x61,0x6C,0x6F,0x67,0x2F,0x50,0x61,0x67,0x65,0x73,0x20,0x32,0x20,
    0x30,0x20,0x52,0x3E,0x3E,0x0A,0x65,0x6E,0x64,0x6F,0x62,0x6A,0x0A,
    // 2 0 obj (pages)
    0x32,0x20,0x30,0x20,0x6F,0x62,0x6A,0x0A,0x3C,0x3C,0x2F,0x54,0x79,0x70,0x65,0x2F,
    0x50,0x61,0x67,0x65,0x73,0x2F,0x4B,0x69,0x64,0x73,0x5B,0x33,0x20,0x30,0x20,0x52,
    0x5D,0x3E,0x3E,0x0A,0x65,0x6E,0x64,0x6F,0x62,0x6A,0x0A,
    // 3 0 obj (page)
    0x33,0x20,0x30,0x20,0x6F,0x62,0x6A,0x0A,0x3C,0x3C,0x2F,0x54,0x79,0x70,0x65,0x2F,
    0x50,0x61,0x67,0x65,0x2F,0x50,0x61,0x72,0x65,0x6E,0x74,0x20,0x32,0x20,0x30,0x20,
    0x52,0x2F,0x4D,0x65,0x64,0x69,0x61,0x42,0x6F,0x78,0x5B,0x30,0x20,0x30,0x20,0x35,
    0x39,0x35,0x2E,0x32,0x38,0x20,0x38,0x34,0x31,0x2E,0x38,0x39,0x5D,0x3E,0x3E,0x0A,
    0x65,0x6E,0x64,0x6F,0x62,0x6A,0x0A,
    // xref
    0x78,0x72,0x65,0x66,0x0A,0x30,0x20,0x34,0x0A,0x30,0x30,0x30,0x30,0x30,0x30,0x30,
    0x30,0x30,0x30,0x20,0x36,0x35,0x35,0x33,0x35,0x20,0x66,0x0A,0x30,0x30,0x30,0x30,
    0x30,0x30,0x30,0x31,0x38,0x35,0x20,0x30,0x30,0x30,0x30,0x30,0x20,0x6E,0x0A,0x30,
    0x30,0x30,0x30,0x30,0x30,0x30,0x36,0x36,0x36,0x20,0x30,0x30,0x30,0x30,0x30,0x20,
    0x6E,0x0A,0x30,0x30,0x30,0x30,0x30,0x30,0x30,0x39,0x34,0x39,0x20,0x30,0x30,0x30,
    0x30,0x30,0x20,0x6E,0x0A,
    // trailer
    0x74,0x72,0x61,0x69,0x6C,0x65,0x72,0x0A,0x3C,0x3C,0x2F,0x52,0x6F,0x6F,0x74,0x20,
    0x31,0x20,0x30,0x20,0x52,0x2F,0x53,0x69,0x7A,0x65,0x20,0x34,0x3E,0x3E,0x0A,
    // startxref
    0x73,0x74,0x61,0x72,0x74,0x78,0x72,0x65,0x66,0x0A,0x31,0x39,0x35,0x0A,0x25,0x25,
    0x45,0x4F,0x46,0x0A
  ]);

  res.setHeader("Content-Type", "application/pdf");
  res.setHeader("Content-Disposition", 'attachment; filename="smoke.pdf"');
  res.status(200).send(pdf);
};
